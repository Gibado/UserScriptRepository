// ==UserScript==
// @name         Facebook Collection Enhancements
// @namespace    http://tampermonkey.net/
// @version      2024-06-13
// @description  Adds IDs to the items
// @author       Tyler STudanski
// @match        https://www.facebook.com/saved/?list_id=10161216093723490&referrer=SAVE_DASHBOARD_NAVIGATION_PANEL
// @icon         https://www.google.com/s2/favicons?sz=64&domain=facebook.com
// @grant        none
// ==/UserScript==

'use strict';

// Your code here...
document.insertIds = function() {
    var existing = [1357084781644496,412934254797071,436508269165261,456594346947610,766253102259228,781335853818084,7970690066298136,813233503644656,946447057154752,
        995860078238369,2064737577254024,443470641543438,2193031517710650,1153360132549707,1192563715244308,1152589909068929,2174657559576453,944045340795281,
        3675808552708011,1451848972393508,1850134408827368,2764225200385114,967213411855713,2063622013996204,1034870230889300,941000976960816,1839479336515497,
        410955088576006,769603958659249,426042480332285,1358575045085332,1391384155587341,498557132608619,1658934771589483,781335853818084,928608725681107,
        765608339084865,464520716052215,766253102259228,450492297629740,1215847889404853,7445840488865874,461260012965505,1076706030213156,393290213630520,
        332208469726588,3735894026699253,973964300892902,1010465524075274,1642593219900078,1472046327068760,399810759593877,968123141423923,344211171180889,
        1242250539890643,7970690066298136,814810230584052,946447057154752,436508269165261,839051107084380,798921312194506,456594346947610,987968226101389,
        2184134825256477,1376186856415600,813233503644656,384406377316111,1357084781644496,412934254797071,400005156336294];

    var newIds = [];
    document.querySelectorAll('.x1yztbdb.xh8yej3').forEach(function(item){
        var link = item.querySelector('a').href;
        var id = parseInt(link.slice(link.indexOf("item/")+5,-1));
        newIds.push(id);

        var highlight = item.querySelector('.x1lliihq.x6ikm8r.x10wlt62.x1n2onr6.xlyipyv.xuxw1ft.x1j85h84').textContent;
        var color = '';
        if (highlight.indexOf('Sold') != -1) {
            color = 'red';
        }
        if (existing.includes(id)) {
            color = 'yellow';
        }

        item.style.backgroundColor = color;

        item.querySelector('.x1lliihq.x6ikm8r.x10wlt62.x1n2onr6.xlyipyv.xuxw1ft.x1j85h84').textContent = id;
        return newIds;
    });
}
